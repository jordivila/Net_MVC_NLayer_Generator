<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="loggingConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.LoggingSettings, Microsoft.Practices.EnterpriseLibrary.Logging" requirePermission="true" />
    <section name="unity" type="Microsoft.Practices.Unity.Configuration.UnityConfigurationSection, Microsoft.Practices.Unity.Configuration" />
    <sectionGroup name="templateSettings">

    </sectionGroup>
  </configSections>
  <templateSettings>

  </templateSettings>
  <loggingConfiguration name="" tracingEnabled="true" defaultCategory="UIGeneral">
    <listeners>
      <!-- Begin This listeners write trace data in XML RollingFlatFiles -->
      <add name="ListenerByDefaultRollingXmlFile" type="$customNamespace$.Models.Logging.RollingXmlTraceListener, $customNamespace$.Models"             listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.RollingFlatFileTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging" fileName="%APPDATA%\ListenerByDefaultRollingXmlFile.xml" footer="" header="" formatter="Text Formatter Xml Output" rollSizeKB="1024" timeStampPattern="yyyy-MM-dd" maxArchivedFiles="2" />
      <add name="ListenerOnUIClientSideErrorsRollingXmlFile" type="$customNamespace$.Models.Logging.RollingXmlTraceListener, $customNamespace$.Models"  listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.RollingFlatFileTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging" fileName="%APPDATA%\App_Data\ListenerOnUIClientSideErrorsRollingXmlFile.xml" footer="" header="" formatter="Text Formatter Xml Output" rollSizeKB="1024" timeStampPattern="yyyy-MM-dd" maxArchivedFiles="2" />
      <add name="ListenerOnUIServerErrorsRollingXmlFile" type="$customNamespace$.Models.Logging.RollingXmlTraceListener, $customNamespace$.Models"      listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.RollingFlatFileTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging" fileName="%APPDATA%\App_Data\ListenerOnUIServerErrorsRollingXmlFile.xml" footer="" header="" formatter="Text Formatter Xml Output" rollSizeKB="1024" timeStampPattern="yyyy-MM-dd" maxArchivedFiles="2" />
      <add name="ListenerOnBeginRequestRollingXmlFile" type="$customNamespace$.Models.Logging.RollingXmlTraceListener, $customNamespace$.Models"        listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.RollingFlatFileTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging" fileName="%APPDATA%\App_Data\ListenerOnBeginRequestRollingXmlFile.xml" footer="" header="" formatter="Text Formatter Xml Output" rollSizeKB="1024" timeStampPattern="yyyy-MM-dd" maxArchivedFiles="2" />
      <!-- End This listeners write trace data in XML RollingFlatFiles -->
      <!-- Begin This listener send async LogEntry to Wcf Service-->
      <add name="ListenerOnUIProxied" type="$customNamespace$.Models.Logging.ProxiedWcfTraceListener, $customNamespace$.Models" listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.CustomTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging" formatter="Text Formatter Xml Output" />
      <!-- End This listener send async LogEntry to Wcf Service-->
    </listeners>
    <formatters>
      <add name="Text Formatter Xml Output" type="$customNamespace$.Models.Logging.RollingXmlTraceListenerFormatter, $customNamespace$.Models" />
    </formatters>
    <!-- Keep in mind all categorySources accept more than one listener. So, In case Wcf proxied does not work properly you can use Any other one -->
    <categorySources>
      <add switchValue="All" name="UIGeneral">
        <listeners>
          <add name="ListenerByDefaultRollingXmlFile" />
          <add name="ListenerOnUIProxied" />
        </listeners>
      </add>
      <add switchValue="All" name="UIBeginRequest">
        <listeners>
          <add name="ListenerOnBeginRequestRollingXmlFile" />
          <add name="ListenerOnUIProxied" />
        </listeners>
      </add>
      <add switchValue="All" name="UIServerSideUnhandledException">
        <listeners>
          <add name="ListenerOnUIServerErrorsRollingXmlFile" />
          <add name="ListenerOnUIProxied" />
        </listeners>
      </add>
      <add switchValue="All" name="UIClientSideJavascriptError">
        <listeners>
          <add name="ListenerOnUIClientSideErrorsRollingXmlFile" />
          <add name="ListenerOnUIProxied" />
        </listeners>
      </add>
    </categorySources>
    <specialSources>
      <allEvents switchValue="All" name="All Events" />
      <notProcessed switchValue="All" name="Unprocessed Category" />
      <errors switchValue="All" name="Logging Errors &amp; Warnings">
        <listeners>
          <add name="ListenerByDefaultRollingXmlFile" />
          <add name="ListenerOnUIProxied" />
        </listeners>
      </errors>
    </specialSources>
  </loggingConfiguration>
  <appSettings>
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="PreserveLoginUrl" value="true" />
    <!--<add key="webpages:Enabled" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />-->
  </appSettings>
  <system.web>
    <!--<globalization uiCulture="es" culture="es-ES" />-->
    <sessionState mode="StateServer" cookieName=".UISessionId" />
    <customErrors mode="Off">
      <error statusCode="404" redirect="/Error/NotFound404" />
      <error statusCode="401" redirect="/Error/NotFound404" />
    </customErrors>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Helpers, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.WebPages, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      </assemblies>
    </compilation>
    <authentication mode="None" />
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="false" />
  </system.webServer>
  <system.serviceModel>
    <behaviors>
      <endpointBehaviors>
        <behavior name="EnableMessageInspectorBehavior">
          <MessageInspectorBehavior />
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <extensions>
      <behaviorExtensions>
            <add name="MessageInspectorBehavior" type="$safeprojectname$.Common.AspNetApplicationServices.MessageInspectorBehaviorExtension, $safeprojectname$" />
      </behaviorExtensions>
    </extensions>
    <bindings>
      <!--TODO: crear un binding para servicios que utilizan gran cantuidad de datos como por ejemplo IProviderSynduication y asignar un  valor maxStringContentLength bastante alto
                dejar el binding por defecto con las readerQuotas por defecto y asignar ese binding a los servicios que no utilizan datos pesados
      -->
      <netTcpBinding>
        <binding name="$customBindingIsNetTcp$" maxBufferSize="5242880" maxBufferPoolSize="524288" maxReceivedMessageSize="5242880">
          <readerQuotas maxDepth="32" maxStringContentLength="5242880" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384"></readerQuotas>
          <security mode="Transport">
            <transport clientCredentialType="Windows" protectionLevel="EncryptAndSign" />
            <message clientCredentialType="Windows" />
          </security>
        </binding>
      </netTcpBinding>
      <basicHttpBinding>
        <binding name="$customBindingIsBasicHttp$" maxBufferSize="5242880" maxBufferPoolSize="524288" maxReceivedMessageSize="5242880">
          <readerQuotas maxDepth="32" maxStringContentLength="5242880" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384"></readerQuotas>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint name="IProviderMembership"                  address="$customBindingProtocol$://localhost:8523/$customNamespace$.WCF.ServicesLibrary.AspNetApplicationServices/Admin/MembershipService/"  behaviorConfiguration="EnableMessageInspectorBehavior"  binding="$customBindingTypeName$" bindingConfiguration="$customBindingConfigurationName$" contract="$customNamespace$.Models.Membership.IProviderMembership" />
      <endpoint name="IProviderAuthentication"              address="$customBindingProtocol$://localhost:8524/$customNamespace$.WCF.ServicesLibrary.AspNetApplicationServices/AuthenticationService/"    behaviorConfiguration="EnableMessageInspectorBehavior"  binding="$customBindingTypeName$" bindingConfiguration="$customBindingConfigurationName$" contract="$customNamespace$.Models.Authentication.IProviderAuthentication" />
      <endpoint name="IProviderRoleManager"                 address="$customBindingProtocol$://localhost:8525/$customNamespace$.WCF.ServicesLibrary.AspNetApplicationServices/Admin/RoleServiceAdmin/"   behaviorConfiguration="EnableMessageInspectorBehavior"  binding="$customBindingTypeName$" bindingConfiguration="$customBindingConfigurationName$" contract="$customNamespace$.Models.Roles.IProviderRoleManager" />
      <endpoint name="IProviderRoles"                       address="$customBindingProtocol$://localhost:8526/$customNamespace$.WCF.ServicesLibrary.AspNetApplicationServices/RoleService/"              behaviorConfiguration="EnableMessageInspectorBehavior"  binding="$customBindingTypeName$" bindingConfiguration="$customBindingConfigurationName$" contract="$customNamespace$.Models.Roles.IProviderRoles" />
      <endpoint name="IProviderProxyProfileServices"        address="$customBindingProtocol$://localhost:8527/$customNamespace$.WCF.ServicesLibrary.AspNetApplicationServices/ProfileService/"           behaviorConfiguration="EnableMessageInspectorBehavior"  binding="$customBindingTypeName$" bindingConfiguration="$customBindingConfigurationName$" contract="$customNamespace$.Models.Profile.IProviderProxyProfileServices" />
      <endpoint name="IProviderLogging"                     address="$customBindingProtocol$://localhost:8528/$customNamespace$.WCF.ServicesLibrary.LoggingServices/LoggingService/"                     behaviorConfiguration=""                                binding="$customBindingTypeName$" bindingConfiguration="$customBindingConfigurationName$" contract="$customNamespace$.Models.Logging.IProviderLogging" />
      <endpoint name="IProviderSyndication"                 address="$customBindingProtocol$://localhost:8529/$customNamespace$.WCF.ServicesLibrary.SyndicationServices/SyndicationService/"             behaviorConfiguration=""                                binding="$customBindingTypeName$" bindingConfiguration="$customBindingConfigurationName$" contract="$customNamespace$.Models.Syndication.IProviderSyndication" />
    </client>
  </system.serviceModel>
</configuration>